# Angular #1

```zsh
$ npm install @angular/cli -g
$ ng new angular-quick-start
```

```zsh
# nvm default 바꾸기
$ nvm alias default 8.9.1
```

```json
// tsconfig.json
{
  "compileOnSave": false,
  "compilerOptions": {
    "outDir": "./dist/out-tsc",
    "sourceMap": true,
    "declaration": false,
    "moduleResolution": "node",
    "emitDecoratorMetadata": true,
    "experimentalDecorators": true,
    "target": "es5",
    "typeRoots": [
      "node_modules/@types"
    ],
    "lib": [
      "es2017",
      "dom"
    ]
  }
}
```

<br>

## Component

* 독립적으로 동작 가능한 UI요소. 
* HTHL 템플릿, 스타일과 로직을 결합
* DOM과 같은 트리 구조로 UI 요소들을 구성
* [**W3C 표준** 웹컴포넌트 기술](https://developer.mozilla.org/ko/docs/Web/Web_Components
)을 기반으로 함 (ex. polymer)
  - HTML Templates
  - HTML Imports
  - Shadow DOM - encapsulation
    - 실제 돔이 아니라 자기만의 DOM을 가지고 외부와의 인터페이스와 분리된
    - encapsulate와 관계가 깊다.
  - Custom Elements

<br>

## Component Tree & Data Flow

![react component](https://s3.amazonaws.com/media-p.slid.es/uploads/640576/images/4398069/store.png)

<br>

## Component 를 만드는 방법

1. 데코레이터가 달린 클래스를 정의하는 것
  - [데코레이터](http://slides.com/woongjae/typescript-basic-3#/3)
  - 한 파일에 하나의 컴포넌트를 작성, 하나의 클래스를 작성

2. 데코레이터에 컴포넌트의 메타데이터를 작성
  - selector
  - template, templateUrl
  - styles, styleUrls
 
<br>

## auto create components

```
ng g c (name)
```


## app-name

```json
// .angular-cli.json
// prefix를 수정하면 'app-' 부분을 수정할 수 있다.
"apps":{
  ...
  "prefix": "app",
  ...
}
```

## Component 내 로직 처리 방법

컴포넌트는 크게 표현 계층과 (로직이 있는) 기능 계층이 있다.

- angular1 = 양방향 바인딩
- angular2 = 양방향 바인딩 가능하지만, 지향하지 않음

컴포넌트에서 데이터를 주고 받기 위해 리액트는 props, state를 사용한다.

기본적으로 데이터가 변경되면 view도 변경된다.

사용자가 입력함과 동시에 뷰를 바꾸려면 양방향 데이터 바인딩을 사용한다.
  - [()]
  - [(ngModel)]

- 컴포넌트 트리 상에 붙어 있다면? (인접한 컴포넌트끼리 라면) => @Input, @Output
- 붙어 있지 않다면?
  - 같은 가지에 있다면? (부모/자식 이상 컴포넌트라면)
  - 같은 가지가 아니라면? (형제 이상의 컴포넌트라면)

<br>

## 컴포넌트 생명주기

1. 생성과 소멸 시점
2. 데이터가 변경되는 시점

  1. constructor
  2. ngOnChanges-DoCheck
  3. ngOnInit
  4. ngAfterContentInit
  5. ngAfterContentChecked
  6. ngAfterViewInit
  7. ngAfterViewChecked
  8. ngOnDestroy

```
import {
  OnChanges,OnInit,AfterContentInit,AfterContentChecked,AfterViewInit,AfterViewChecked,OnDestroy
}
```

### 정리
- constructor - 누가 뭐래도 1빠
- ngOnChanges - 최초 초기화 때 / Input 프로퍼티가 변경될 때
  - Input 이 없으면 실행되지 않는다.
- ngOnInit - 프로퍼티 초기화된 직후
- ngAfterContentInit - ngContent 사용 시 자식이 초기화 된 직후
- ngAfterContentChecked - ngContent 를 통해 HTML 을 받을때
    - 최초 / 변경시
- ngAfterViewInit - 템플릿이 모두 초기화 되었을때
- ngAfterViewChecked - 템플릿에 바인딩된 값이 변경되었을때

<br>

## Angular CLI

### Unit Test
  - jasmine
  - karma

<br>


## DI

![playground](http://www.typescriptlang.org/play/index.html)



```ts
//app.component.ts

@Component({
  ...
})

export class AppComponent {
  title='app'
  constructor(private one: OneService){
    console.log(one.name)
  }
}

// app.module.ts
@NgModule({

  providers:[
    OneService
  ]
})

// a.component.ts
@Component({
  ...
})
export class ~ {
  constructor(private one: OneService) {
    console.log('One Service')

  }
}
```

```html
<!-- a.component -->

```
